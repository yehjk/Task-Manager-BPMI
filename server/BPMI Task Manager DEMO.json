{
  "info": {
    "_postman_id": "11111111-2222-3333-4444-555555555555",
    "name": "Task Manager BE (Boards, Columns, Tasks, Auth, Audit)",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    { "key": "baseUrl", "value": "http://localhost:3001" },
    { "key": "token", "value": "" },
    { "key": "boardId", "value": "demo-board" },
    { "key": "labelId", "value": "" },
    { "key": "columnId", "value": "" },
    { "key": "targetColumnId", "value": "" },
    { "key": "taskId", "value": "" }
  ],
  "item": [
    {
      "name": "Health & Info",
      "item": [
        {
          "name": "Health check (GET /health)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": ["{{baseUrl}}"],
              "path": ["health"]
            }
          },
          "response": []
        },
        {
          "name": "API root (GET /api)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api",
              "host": ["{{baseUrl}}"],
              "path": ["api"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Auth (Mock JWT)",
      "item": [
        {
          "name": "Login mock (POST /auth/login-mock)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login-mock",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login-mock"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "  const data = pm.response.json();",
                  "  if (data.token) {",
                  "    pm.collectionVariables.set('token', data.token);",
                  "  }",
                  "}",
                  "",
                  "pm.test('Got token', function () {",
                  "  const data = pm.response.json();",
                  "  pm.expect(data.token).to.exist;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Boards & Labels (BE-1)",
      "item": [
        {
          "name": "Get boards (GET /boards)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/boards",
              "host": ["{{baseUrl}}"],
              "path": ["boards"]
            }
          },
          "response": []
        },
        {
          "name": "Create board (POST /boards)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Sprint 1 Board\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/boards",
              "host": ["{{baseUrl}}"],
              "path": ["boards"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "  const data = pm.response.json();",
                  "  pm.collectionVariables.set('boardId', data.id);",
                  "}",
                  "pm.test('Board created', function () {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Update board name (PATCH /boards/:id)",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Board Name\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/boards/{{boardId}}",
              "host": ["{{baseUrl}}"],
              "path": ["boards", "{{boardId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Delete board (DELETE /boards/:id)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/boards/{{boardId}}",
              "host": ["{{baseUrl}}"],
              "path": ["boards", "{{boardId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Get labels (GET /boards/:id/labels)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/boards/{{boardId}}/labels",
              "host": ["{{baseUrl}}"],
              "path": ["boards", "{{boardId}}", "labels"]
            }
          },
          "response": []
        },
        {
          "name": "Create label (POST /boards/:id/labels)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"UI\",\n  \"color\": \"#3b82f6\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/boards/{{boardId}}/labels",
              "host": ["{{baseUrl}}"],
              "path": ["boards", "{{boardId}}", "labels"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "  const data = pm.response.json();",
                  "  pm.collectionVariables.set('labelId', data.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Update label (PATCH /boards/:id/labels/:labelId)",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated UI\",\n  \"color\": \"#0ea5e9\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/boards/{{boardId}}/labels/{{labelId}}",
              "host": ["{{baseUrl}}"],
              "path": ["boards", "{{boardId}}", "labels", "{{labelId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Delete label (DELETE /boards/:id/labels/:labelId)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/boards/{{boardId}}/labels/{{labelId}}",
              "host": ["{{baseUrl}}"],
              "path": ["boards", "{{boardId}}", "labels", "{{labelId}}"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Columns & Tasks (BE-2)",
      "item": [
        {
          "name": "Get columns (GET /boards/:id/columns)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/boards/{{boardId}}/columns",
              "host": ["{{baseUrl}}"],
              "path": ["boards", "{{boardId}}", "columns"]
            }
          },
          "response": []
        },
        {
          "name": "Create column (POST /columns)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"boardId\": \"{{boardId}}\",\n  \"title\": \"Review\",\n  \"position\": 4\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/columns",
              "host": ["{{baseUrl}}"],
              "path": ["columns"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "  const data = pm.response.json();",
                  "  pm.collectionVariables.set('columnId', data.id);",
                  "  pm.collectionVariables.set('targetColumnId', data.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Delete column (DELETE /columns/:id)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/columns/{{columnId}}",
              "host": ["{{baseUrl}}"],
              "path": ["columns", "{{columnId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Get tasks (GET /boards/:id/tasks)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/boards/{{boardId}}/tasks",
              "host": ["{{baseUrl}}"],
              "path": ["boards", "{{boardId}}", "tasks"]
            }
          },
          "response": []
        },
        {
          "name": "Create task (POST /boards/:id/tasks)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"My first task\",\n  \"columnId\": \"{{columnId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/boards/{{boardId}}/tasks",
              "host": ["{{baseUrl}}"],
              "path": ["boards", "{{boardId}}", "tasks"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "  const data = pm.response.json();",
                  "  pm.collectionVariables.set('taskId', data.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Update task title (PATCH /tasks/:id)",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Updated task title from Postman\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/tasks/{{taskId}}",
              "host": ["{{baseUrl}}"],
              "path": ["tasks", "{{taskId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Move task (PATCH /tasks/:id/move)",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"columnId\": \"{{targetColumnId}}\",\n  \"position\": 1\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/tasks/{{taskId}}/move",
              "host": ["{{baseUrl}}"],
              "path": ["tasks", "{{taskId}}", "move"]
            }
          },
          "response": []
        },
        {
          "name": "Delete task (DELETE /tasks/:id)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/tasks/{{taskId}}",
              "host": ["{{baseUrl}}"],
              "path": ["tasks", "{{taskId}}"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Audit (BE-3)",
      "item": [
        {
          "name": "Create audit entry (POST /audit)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"action\": \"TASK_TEST\",\n  \"entity\": \"task\",\n  \"entityId\": \"{{taskId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/audit",
              "host": ["{{baseUrl}}"],
              "path": ["audit"]
            }
          },
          "response": []
        },
        {
          "name": "Get audit by entity & id (GET /audit?entity=&entityId=)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/audit?entity=task&entityId={{taskId}}",
              "host": ["{{baseUrl}}"],
              "path": ["audit"],
              "query": [
                { "key": "entity", "value": "task" },
                { "key": "entityId", "value": "{{taskId}}" }
              ]
            }
          },
          "response": []
        }
      ]
    }
  ]
}
